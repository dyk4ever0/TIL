<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>서버에 미국 ip 로그가 있을때 | Today I Learned</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/TIL/logo.png">
    <meta name="description" content="수정일: 2024-11-11">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.093cd7c6.css" as="style"><link rel="preload" href="/TIL/assets/js/app.7249e564.js" as="script"><link rel="preload" href="/TIL/assets/js/2.90ac9cc4.js" as="script"><link rel="preload" href="/TIL/assets/js/1.9c7acc09.js" as="script"><link rel="preload" href="/TIL/assets/js/22.bfa5cbb9.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.67bc35f0.js"><link rel="prefetch" href="/TIL/assets/js/11.ea4e7555.js"><link rel="prefetch" href="/TIL/assets/js/12.f40da318.js"><link rel="prefetch" href="/TIL/assets/js/13.10b3e78b.js"><link rel="prefetch" href="/TIL/assets/js/14.a4dca1ef.js"><link rel="prefetch" href="/TIL/assets/js/15.a4596dc6.js"><link rel="prefetch" href="/TIL/assets/js/16.9b245c3c.js"><link rel="prefetch" href="/TIL/assets/js/17.f3ef96b8.js"><link rel="prefetch" href="/TIL/assets/js/18.9bfbf01f.js"><link rel="prefetch" href="/TIL/assets/js/19.d6620149.js"><link rel="prefetch" href="/TIL/assets/js/20.015f06d4.js"><link rel="prefetch" href="/TIL/assets/js/21.5f69e892.js"><link rel="prefetch" href="/TIL/assets/js/23.1cdf5ce6.js"><link rel="prefetch" href="/TIL/assets/js/24.88d23bf3.js"><link rel="prefetch" href="/TIL/assets/js/25.39fd3a98.js"><link rel="prefetch" href="/TIL/assets/js/26.4c0f3be0.js"><link rel="prefetch" href="/TIL/assets/js/27.62eb06bf.js"><link rel="prefetch" href="/TIL/assets/js/28.900c1976.js"><link rel="prefetch" href="/TIL/assets/js/29.e88dd9a2.js"><link rel="prefetch" href="/TIL/assets/js/3.dc5f2543.js"><link rel="prefetch" href="/TIL/assets/js/30.bcfb6c3e.js"><link rel="prefetch" href="/TIL/assets/js/31.f9e6ba0b.js"><link rel="prefetch" href="/TIL/assets/js/4.e298fed4.js"><link rel="prefetch" href="/TIL/assets/js/5.64f22053.js"><link rel="prefetch" href="/TIL/assets/js/6.725f006c.js"><link rel="prefetch" href="/TIL/assets/js/7.aade6b8c.js"><link rel="prefetch" href="/TIL/assets/js/vendors~docsearch.5cff1987.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.093cd7c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Today I Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/dyk4ever0/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dyks-organization.gitbook.io/undefined/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/dyk4ever0/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://dyks-organization.gitbook.io/undefined/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DevOps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DataBase</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>gitbook-pages</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/gitbook-pages/serverUSA.html" aria-current="page" class="active sidebar-link">서버에 미국 ip 로그가 있을때</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="서버에-미국-ip-로그가-있을때"><a href="#서버에-미국-ip-로그가-있을때" class="header-anchor">#</a> 서버에 미국 ip 로그가 있을때</h1> <h3 id="상황"><a href="#상황" class="header-anchor">#</a> 상황</h3> <p>EC2 서버 로그에서 미국 IP 주소가 감지될 때 원인 분석과 대응 방법 알아보기</p> <p>서버 로그에서 미국 IP 주소가 보이며 GET /login과 같은 경로로 요청을 보낸 로그가 발견된 경우가 있었다.</p> <figure><img src="/TIL/documents/gitbook-pages/.gitbook/assets/1731040602.png.webp" alt=""><figcaption><p>서버에 없는 메소드로 api를 호출한 흔적 로그</p></figcaption></figure> <h3 id="확인-방법"><a href="#확인-방법" class="header-anchor">#</a> 확인 방법</h3> <p><a href="https://whatismyipaddress.com/ip-lookup" target="_blank" rel="noopener noreferrer">what is my IP address<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 의 IP look-up 서비스로 간단히 주소를 찾아본다. 단체/기관명으로 DigitalOcean LLC와 Shadowserver 가 뜨는 것을 찾아볼 수 있었다.</p> <figure><img src="/TIL/documents/gitbook-pages/.gitbook/assets/12345.webp" alt=""><figcaption></figcaption></figure> <p>결론적으로 이들 로그는 Shadowserver나 DigitalOcean LLC와 같은 비영리 보안 기관에서 수행하는 자동 보안 스캔의 결과일 가능성이 크다. 이 기관들은 본인들 피셜(?) 인터넷에 노출된 IP를 대상으로 정기적으로 스캔을 수행하며, 보안 취약점을 진단하고 알려주는 역할을 한다고 한다.</p> <ul><li>자세한 정보는 <a href="https://www.shadowserver.org/faq/why-are-your-ips-scanning-my-network/" target="_blank" rel="noopener noreferrer">Shadowserver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>의 FAQ에서 확인 가능</li></ul> <h3 id="digitalocean-llc-와-shadowserver의-자동-포트-스캔"><a href="#digitalocean-llc-와-shadowserver의-자동-포트-스캔" class="header-anchor">#</a> DigitalOcean LLC 와 Shadowserver의 자동 포트 스캔</h3> <p>DigitalOcean LLC와 Shadowserver의 자동 스캔은 포트 개방 여부나 보안 취약점 확인을 목적으로 수행된다.레딧의 <a href="https://www.reddit.com/r/cybersecurity/comments/ut3ygj/excessive_port_scans_from_digital_ocean_llc/" target="_blank" rel="noopener noreferrer">Cybersecurity 포럼<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>을 보니 여러 서버 운영자들이 DigitalOcean LLC의 IP 주소에서 포트 스캔을 경험하고 있으며, 이를 일반적인 클라우드 호스팅 환경의 특성으로 보고 있다. DigitalOcean은 저렴한 클라우드 호스팅을 제공하기 때문에 다양한 보안 리서치와 테스트 목적으로 사용되며, 이 과정에서 자동화된 스캔이 발생하는 경우가 많다.</p> <ul><li><p>🌊 레딧 서버 전문가들의 경험에 기반한 조언들 (요약: IP 노출되면 어쩔 수 없다고요. 신경쓰고 내 할일 하는게 정신건강을 지키는 일)<br> <code>&quot;포트 스캔은 DoS(서비스 거부 공격)를 일으키는 게 아닌 이상 그냥 일어나는 일이다. 막을 방법은 없다. 방화벽에서 ping 응답을 꺼두고 포트 규칙을 설정할 수는 있다. 근데 포트 스캔을 막겠다고 IP를 차단하는 건 마치 막대기로 바다의 파도를 막으려는 것과 같다. 접속을 시도하거나 DoS를 일으키지 않는 이상, 경고를 정보 레벨로 낮추고 무시하는 게 좋다.&quot;</code>\</p> <p><code>&quot;인터넷에 IP를 노출해 두면 포트 스캔은 일상적인 일이다.&quot;</code>\</p> <p><code>&quot;포트 스캔 자체는 범죄가 아니야. 다만 짜증날 수는 있지. 가장 우선시할 건 방화벽 정책을 견고하게 만드는 거야. 근데 이건 아마 경력이 좀 있는 사람이 할 일일 테지.&quot;</code>\</p> <p><code>&quot;이건 그냥 현실이야. 인터넷에 연결되어 있으면 스캔당할 수밖에 없어. 이런 활동에 너무 '놀라지' 말고, 그저 인지하고 불필요한 서비스나 패치되지 않은 애플리케이션이 없는지 항상 주의하는 게 중요해.&quot;</code></p></li></ul> <h3 id="서버-측-조치-방안"><a href="#서버-측-조치-방안" class="header-anchor">#</a> 서버 측 조치 방안</h3> <h4 id="ip-화이트리스트-및-방화벽-설정"><a href="#ip-화이트리스트-및-방화벽-설정" class="header-anchor">#</a> IP 화이트리스트 및 방화벽 설정</h4> <p>외부 접근이 불필요한 API나 서비스의 경우, 내부 개발팀에서 사용하는 IP만 허용하도록 IP 화이트리스트를 설정하고 방화벽을 구성한다. 이를 통해 승인되지 않은 외부 IP의 접근을 차단하고, 잠재적인 보안 위협을 최소화할 수 있다.<br> <br>
로그 모니터링 및 경고 시스템 설정서버에 접속하는 IP 주소와 요청 패턴을 실시간으로 모니터링하여 비정상적인 접근 시도에 대해 경고를 받을 수 있도록 로그 모니터링 시스템을 구축한다. 이는 예기치 않은 외부 접근을 빠르게 인지하고 대응할 수 있게 도와준다.<br> <br>
API 호출 오류 알림 설정API 호출 시 오류가 발생하거나 404 Not Found 응답이 빈번하게 발생하는 경우 이를 감지하여 즉각 알림을 보내는 에러 알림 시스템을 설정한다. 이러한 시스템을 통해 의심스러운 접근 시도가 반복될 경우 신속하게 대응할 수 있다.</p> <h3 id="결론-겁먹지-말고-방화벽-세팅-잘하자🛡️"><a href="#결론-겁먹지-말고-방화벽-세팅-잘하자🛡️" class="header-anchor">#</a> 결론: 겁먹지 말고 방화벽 세팅 잘하자🛡️</h3> <p>DigitalOcean LLC와 Shadowserver의 포트 스캔은 일반적으로 서버의 보안 상태를 점검하는 무해한 활동이다. 그러나 민감한 데이터를 다루는 서비스는 IP 화이트리스트와 방화벽 설정, 로그 모니터링 등의 보안 조치를 통해 추가적인 보호를 강화할 필요가 있다.</p> <p>혹시라도 스캔해 오는 IP를 좀 괴롭히고 싶다면, 허니팟(타르 핏) 설정도 재미있는 방법. 타르 핏은 공격자의 자원을 소모시키면서 시간을 질질 끄는 방식으로, 딱히 위험하지는 않지만 그들 입장에선 진짜 답답한 상황을 만들 수 있음. 다만, 보안 평가 같은 스캔이면 오히려 평가 점수가 나빠질 수 있으니 주의하자.</p> <p>인터넷에 서버를 두면 전 세계 수많은 '손님'이 쳐다보게 되어있음. 스캔 때문에 긴장할 필요는 없지만, 진짜 중요한 건 방화벽을 통한 불필요한 서비스 차단과 보안 패치이다. 서버가 오픈된 이상, 세상은 우리 서버를 기웃거리는 클라이언트들로 가득하다는 걸 기억하자.​</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/DataBase/Redis.html" class="prev">
        Redis Data Structures
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.7249e564.js" defer></script><script src="/TIL/assets/js/2.90ac9cc4.js" defer></script><script src="/TIL/assets/js/1.9c7acc09.js" defer></script><script src="/TIL/assets/js/22.bfa5cbb9.js" defer></script>
  </body>
</html>
